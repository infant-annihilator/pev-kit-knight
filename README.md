# pev-kit-knight
Игра на JavaScript. 
Использовался сборщик модулей webpack, чтобы разложить логику игры по разным модулям и папкам.

Скорее всего, для запуска должен быть установлен node.js (https://nodejs.org/en/) и вебпак. 
Для установки просто напишите в консоли "git clone https://github.com/infant-annihilator/pev-kit-knight.git" (у вас должен быть установлен git)
Для запуска потребуется развернуть проект на сервере и добавить базу данных. Настройки пользвоателя базы данных лежат в файле /php/register.php. Настройки доступа к базе на 3 строчке.
Каркас базы данных: /php/ranking.sql.
Развернуть сервер возможно на любом удобном вам ПО, мной использовался Open Server 5.3.7.0

Используемые клавишы: 1 - основной удар, 2 - щит, стрелки - передвижение игрока, esc - пауза

Последние изменения (январь 2021):
- Спаун врагов
- Новая сцена (конец игры): таймер останавливается, вызов при смерти игрока, либо при достижении игрока правого края карты
- Таблица рекордов, сохранение результата игрока на сервере (через ajax-запрос) с анимацией загрузки
- Сортировка рекордов (по убийствам по убыванию и по времени по возрастанию; если убийства и время равны - место в рейтинге одинаково)
- Текущий игрок выделяется в рейтинге. Если он не вошёл в топ-10, то он выводится десятым в списке, при этом слева можно увидеть его фактическое место в рейтинге
- Кнопка "играть сначала" и логика игры заново (всё сбрасывается, но начальный экран не выводится, никнейм повторно вводить не нужно)
- и т.д.

Вся логика находится в /layout/assets/js

=============================
=============================

Там находятся следующие директории:


_relations - здесь лежит файл сборщика модулей, связывающий между собой все модули

abstract-main - здесь лежат главные абстрактные классы. Это класс сцены (scene, описывает основные правила для сцены, а также логику переключения между сценами), персонажа (character, добавляет основные свойства классу персонажа) и навка (skill, основные свойства классу навыков, которые может использовать игрок)

animation - здесь пока лежит только анимация текста (text-animation, в к), в перспективе будут классы для спрайтов

characters - здесь лежат классы разных персонажей: игрок (player), а также абстрактный класс врага (_enemy) и самих врагов (elf, greench, dog)

dom - здесь лежат классы, относящиеся к dom-элементам: это dom и text

interface - классы, относящиеся к интерфейсу игры: hud (интерфейс игрока) и screen (интерфейс экрана игры)

mechanics - здесь лежат классы, реализовывающие механику: класс ajax-запроса (ajax), класс клавиатуры (control-state), класс загрузки изображений (image-loader) и класс паузы (pause)

scenes - здесь лежат сцены игры: меню (menu), процесс игры (game-process) и конец игры (end)

skills - здесь лежат навыки игрока: обычный удар и щит

game.js - главный класс игры, связывающий между собой все остальные

main.js - входной файл вебпака

=============================
=============================

Что нужно будет исправить:
- Определять кнопки навыков не в классе игрока, а в классах соотвтетсующих навыков 
- Улучшить логику абстракций навыков и персонажей
- Движение по холмам (синусоидная функция, которая за это отвечает) слишком зависит от разрешения экрана
- Добавить анимацию через спрайты
